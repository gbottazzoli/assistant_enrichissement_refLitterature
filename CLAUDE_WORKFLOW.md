# ğŸ¤– Workflow Claude Code - Agents Automatiques

Ce document explique **quand et comment** Claude Code doit utiliser les agents automatiques du projet.

---

## ğŸ“‹ Reprise du projet (nouvelle conversation)

### Commande utilisateur

```bash
bash resume_project.sh
```

### Ce que fait le script

1. Met Ã  jour `PROJECT_STATE.md`
2. Met Ã  jour `project_state.json`
3. Met Ã  jour les stats dans `README.md`

### Ce que Claude doit faire ensuite

```
1. Lire PROJECT_STATE.md (Ã©tat complet du projet)
2. Lire TODO.md (roadmap et prioritÃ©s)
3. Confirmer au user : "Projet chargÃ©, version X.X.X, prÃªt Ã  dÃ©velopper"
```

---

## ğŸ”„ Quand appeler l'agent de documentation

### Agent : `project_state.py`

**Appeler APRÃˆS** :
- âœ… Ajout de nouvelles fonctions/classes
- âœ… Modification significative de l'architecture
- âœ… Avant de publier sur Git
- âœ… Ã€ la demande explicite de l'utilisateur
- âœ… Avant une nouvelle conversation (via `resume_project.sh`)

**NE PAS appeler** :
- âŒ Petites corrections de bugs
- âŒ Modifications de documentation seulement
- âŒ Changements de configuration

**Commande** :
```bash
python3 project_state.py
```

**Fichiers gÃ©nÃ©rÃ©s** :
- `PROJECT_STATE.md` (rapport lisible)
- `project_state.json` (donnÃ©es structurÃ©es)
- `README.md` (stats mises Ã  jour)

---

## ğŸ“¤ Quand appeler l'agent Git

### Agent : `git_publish.py`

**Appeler APRÃˆS** :
- âœ… Nouvelles fonctionnalitÃ©s terminÃ©es et testÃ©es
- âœ… Corrections de bugs importantes
- âœ… Mise Ã  jour de documentation majeure
- âœ… Avant de fermer une session de dÃ©veloppement
- âœ… Ã€ la demande explicite de l'utilisateur

**NE PAS appeler** :
- âŒ DÃ©veloppement en cours (code incomplet)
- âŒ Tests qui Ã©chouent
- âŒ Changements expÃ©rimentaux

**Workflow Git complet** :
```bash
# 1. Mettre Ã  jour la documentation
python3 project_state.py

# 2. Publier
python3 git_publish.py
```

**SÃ©curitÃ©** :
- L'agent scanne automatiquement les secrets
- Demande confirmation avant push
- Ignore automatiquement `config.py` et `results/`

---

## ğŸ¯ Workflow type de dÃ©veloppement

### DÃ©but de session

```bash
# User lance
bash resume_project.sh

# Claude lit
PROJECT_STATE.md
TODO.md
```

### Pendant le dÃ©veloppement

- Claude dÃ©veloppe selon TODO.md
- Tests au fur et Ã  mesure
- Pas d'appel aux agents sauf si changements majeurs

### Fin de session (feature complÃ¨te)

```bash
# Claude lance automatiquement
python3 project_state.py  # Met Ã  jour la doc
python3 git_publish.py    # Publie sur GitHub
```

---

## ğŸ“Š Checklist avant publication

Avant d'appeler `git_publish.py`, vÃ©rifier :

- [ ] Code fonctionnel et testÃ©
- [ ] `PROJECT_STATE.md` Ã  jour (via `project_state.py`)
- [ ] `TODO.md` mis Ã  jour si nouvelles tÃ¢ches/complÃ©tion
- [ ] Aucun `config.py` avec secrets dans le commit
- [ ] Tests passent (quand ils existeront)

---

## ğŸš¨ RÃ¨gles de sÃ©curitÃ© Git

### JAMAIS publier

- âŒ `config.py` (vos chemins/emails personnels)
- âŒ `results/` (vos donnÃ©es d'analyse)
- âŒ `../*.md` (fichiers du vault Obsidian)
- âŒ ClÃ©s API, tokens, passwords

### TOUJOURS publier

- âœ… Code source (`agent.py`, etc.)
- âœ… Templates (`config.example.py`)
- âœ… Documentation
- âœ… `PROJECT_STATE.md`

`.gitignore` gÃ¨re automatiquement le filtrage.

---

## ğŸ’¡ Messages de commit standards

### Features
```
feat: Add Zotero integration with pyzotero
```

### Fixes
```
fix: Correct citation extraction regex
```

### Documentation
```
docs: Update TODO.md with Workflow 2 details
```

### Refactor
```
refactor: Simplify LLM error handling
```

### Agents
```
auto: Update project documentation

ğŸ¤– Generated by project_state.py
```

---

## ğŸ” VÃ©rification de cohÃ©rence

### Avant chaque dÃ©veloppement

Claude doit s'assurer que :

1. **VERSION** cohÃ©rente partout :
   - `PROJECT_STATE.md` : version X.X.X
   - `TODO.md` : version actuelle
   - `README.md` : version actuelle

2. **STATS** alignÃ©es :
   - `README.md` (header auto-gÃ©nÃ©rÃ©)
   - `PROJECT_STATE.md` (section statistiques)

3. **ROADMAP** claire :
   - `TODO.md` : tÃ¢ches Ã  jour
   - `PROJECT_STATE.md` : prochaines Ã©tapes
   - `README.md` : statut global

### Si incohÃ©rence dÃ©tectÃ©e

```bash
python3 project_state.py  # RegÃ©nÃ¨re tout
```

---

## ğŸ“ Template de rÃ©ponse Claude (nouvelle conversation)

```markdown
âœ… **Projet chargÃ© : biblio-enricher v0.1.0**

**Ã‰tat actuel** :
- 886 lignes de code
- 23 fonctions
- 2 classes
- Workflow 1 : 75% implÃ©mentÃ©

**Prochaines Ã©tapes (TODO.md)** :
1. IntÃ©gration Zotero (prioritaire)
2. Mode interactif
3. Tests unitaires

**PrÃªt Ã  dÃ©velopper.** Quelle tÃ¢che souhaitez-vous commencer ?
```

---

## ğŸ“ RÃ©sumÃ© pour Claude

**Nouvelle conversation** :
â†’ User lance `resume_project.sh`
â†’ Je lis `PROJECT_STATE.md` + `TODO.md`
â†’ Je confirme version et Ã©tat

**DÃ©veloppement** :
â†’ Je code selon `TODO.md`
â†’ Je teste au fur et Ã  mesure

**Fin de feature** :
â†’ Je lance `project_state.py`
â†’ Je lance `git_publish.py`
â†’ Je confirme publication

**RÃ¨gle d'or** : Documentation Ã  jour avant publication Git.
